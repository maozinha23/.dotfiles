#!/bin/sh

# Conky: POWER category - AC Adapter
# ------------------------------------------------------------------------------
# Source {{{
# ------------------------------------------------------------------------------
. "${HOME}/.config/conky/utils/validate.sh"
# }}}
# ------------------------------------------------------------------------------
# Constants {{{
# ------------------------------------------------------------------------------
PATH_AC='/sys/class/power_supply/AC0'
FILE_AC_ONLINE="${PATH_AC}/online"
AC_CONNECTED='ON'
AC_DISCONNECTED='OFF'
# }}}
# ------------------------------------------------------------------------------
# Functions {{{
# ------------------------------------------------------------------------------
get_connected() {
  connected=$(cat "${FILE_AC_ONLINE}")

  [ "${connected}" = '1' ] \
    && connected="${AC_CONNECTED}" \
    || connected="${AC_DISCONNECTED}"

  validate_result "${connected}"
}
# }}}
# ------------------------------------------------------------------------------
# Validation {{{
# ------------------------------------------------------------------------------
validate_files "${FILE_AC_ONLINE}" || exit 1
# }}}
# ------------------------------------------------------------------------------
# Main {{{
# ------------------------------------------------------------------------------
get_connected

exit 0
# }}}
